---
title: "An√°lisis Exploratorio de Datos"
author: "Enrique D√≠az Ocampo"
date: "`r Sys.Date()`"
output:
  html_document: default
  pdf_document: default
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, message = FALSE, warning = FALSE)
```

## 1Ô∏è‚É£ **Introducci√≥n**
Este documento presenta un **An√°lisis Exploratorio de Datos (EDA)** aplicado al dataset **Airbnb Listings.**.
Se exploran aspectos clave como:

- Carga y preprocesamiento de datos.
- Identificaci√≥n de variables cuantitativas y cualitativas.
- Resumen estad√≠stico y an√°lisis descriptivo.
- Distribuci√≥n de variables categ√≥ricas.
- Visualizaci√≥n de datos clave.

El objetivo es **comprender la estructura del dataset y detectar patrones en precios, tipos de alojamientos y disponibilidad** antes de aplicar modelos de an√°lisis avanzados.

---

## 2Ô∏è‚É£ **Carga de Librer√≠as y Configuraci√≥n**
```{r}
install.packages("here",dependencies = TRUE)
library(here)           # Manejo de rutas din√°micas
source(here("reportes/Proy_Airbnb/00_CONFIGURACION.r"))
```

```{r}
# üìå Cargar librer√≠as necesarias
library(janitor)        # Limpieza de nombres de columnas
library(summarytools)   # Resumen estad√≠stico detallado
library(ggplot2)        # Gr√°ficos
library(dplyr)          # Manipulaci√≥n de datos

# üìå Cargar configuraci√≥n global
theme_set(theme_minimal())

# üìå Cargar scripts de preprocesamiento
source(here("scripts/utils.r"))
source(here("scripts/1_preprocesamiento_esp_dataset.r"))
```

---

## 3Ô∏è‚É£ **Carga y Preprocesamiento de Datos**
```{r}
# üìå Cargar y preprocesar el dataset
airbnb_data <- preprocesar_datos(here("datasets/listings_filtered.csv"), "Airbnb")
```
üìå **¬øQu√© hace esta funci√≥n?**
‚úî Limpia los nombres de las columnas.
‚úî Convierte variables categ√≥ricas en factores.
‚úî Filtra valores inv√°lidos.
‚úî Retorna un dataset listo para an√°lisis.

---

## 4Ô∏è‚É£ **Identificaci√≥n de Variables Cuantitativas y Cualitativas**

```{r}
# üìä Identificaci√≥n de Tipos de Variables

variables_cuantitativas <- airbnb_data %>%
  select(where(is.numeric)) %>%
  names()

variables_cualitativas <- airbnb_data %>%
  select(where(~ is.character(.) | is.factor(.))) %>%
  names()

# Imprimir resultados
cat("\nüìä **Variables Cuantitativas:**\n", paste(variables_cuantitativas, collapse = ", "), "\n")
cat("\nüìä **Variables Cualitativas:**\n", paste(variables_cualitativas, collapse = ", "), "\n")
```


---

## 5Ô∏è‚É£ Resumen Estad√≠stico del Dataset

üìå ¬øQu√© nos dice esto?

‚úî Muestra estad√≠sticas generales como media, mediana, m√≠nimos, m√°ximos y percentiles.

‚úî Nos ayuda a detectar valores at√≠picos y datos faltantes.

```{r}
# Resumen del dataset
summary(airbnb_data %>% select(-c(name, listing_url, description, neighborhood_overview, host_url,host_since,amenities)))
```

## 6Ô∏è‚É£ An√°lisis Descriptivo Detallado

üìå ¬øPor qu√© usar descr()?

‚úî Genera estad√≠sticas m√°s detalladas que summary(), incluyendo frecuencias y desviaciones est√°ndar.

‚úî Permite explorar datos de forma m√°s granular para detectar patrones.

```{r}
descr(airbnb_data) 
```

## 7Ô∏è‚É£ Distribuci√≥n de Variables Categ√≥ricas

üìå ¬øPor qu√© analizar variables categ√≥ricas?

‚úî Nos ayuda a entender la frecuencia de distintos tipos de alojamientos, pol√≠ticas de los anfitriones y distribuci√≥n de precios por tipo de propiedad.

‚úî Es √∫til para identificar patrones de oferta en Airbnb.

Los resultados se guardar√°n en la carpeta de resultados_generados para referencia futura.



```bash
/Proy_Airbnb/resultados_generados/1_categorical_variable_counts.txt
```

```{r}
save_categorical_counts(airbnb_data %>% select(-c(name, listing_url, description, neighborhood_overview, host_url,host_since,amenities)),"Proy_Airbnb")
```
